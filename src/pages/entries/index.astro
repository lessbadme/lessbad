---
import { getCollection } from "astro:content";
import HubLayout from "../../layouts/HubLayout.astro";
import GameLinks from "../../components/GameLinks.astro";
import EntryList from "../../components/EntryList.astro";
import SectionHeader from "../../components/SectionHeader.astro";

const allEntries = (await getCollection("entries")).sort(
  (a, b) => b.data.date.getTime() - a.data.date.getTime(),
);

const games = [...new Set(allEntries.map((entry) => entry.data.game))];
---

<HubLayout
  title="Learning Entries"
  heading="All learning entries"
  intro="Deliberate practice notes grouped by game and available as one running log."
>
  <section class="notebook-surface">
    <SectionHeader title="Browse by game" />
    <GameLinks games={games} />
  </section>

  <section class="notebook-surface">
    <SectionHeader title="Latest entries" detail={`${allEntries.length} total entries`} />
    <EntryList entries={allEntries} />
  </section>
</HubLayout>
