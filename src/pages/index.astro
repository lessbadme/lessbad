---
import { getCollection } from "astro:content";
import HubLayout from "../layouts/HubLayout.astro";
import EntryList from "../components/EntryList.astro";
import GameLinks from "../components/GameLinks.astro";
import SectionHeader from "../components/SectionHeader.astro";

const entries = (await getCollection("entries")).sort(
  (a, b) => b.data.date.getTime() - a.data.date.getTime(),
);

const games = [...new Set(entries.map((entry) => entry.data.game))];
const recentEntries = entries.slice(0, 5);
---

<HubLayout
  title="Dashboard"
  heading="Learning dashboard"
  intro="Notebook-style review of experiments, mistakes, and repeatable wins across each game."
>
  <section class="notebook-surface">
    <SectionHeader title="Game hubs" detail="Jump to focused notes by title." />
    <GameLinks games={games} />
  </section>

  <section class="notebook-surface">
    <SectionHeader title="Recent entries" detail="Latest learnings across all games." />
    <EntryList entries={recentEntries} />
  </section>
</HubLayout>
